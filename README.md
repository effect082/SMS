# 🎂 복지관 생일 SMS 발송 시스템

복지관 후원자들의 생일을 자동으로 관리하고 축하 문자를 발송하는 웹 애플리케이션입니다.

## 📋 주요 기능

### 1. 후원자 데이터 관리

- **CSV 템플릿 다운로드**: 표준 형식의 CSV 파일 제공
- **CSV 파일 업로드**: 드래그 앤 드롭 또는 클릭으로 쉽게 업로드
- **한글 인코딩 지원**: UTF-8 with BOM 자동 처리
- **중복 검증**: 이름+전화번호 기준으로 중복 자동 감지 및 제외
- **데이터 검색**: 이름, 전화번호, 생년월일 기준 실시간 검색

### 2. 생일 자동 매칭

- **오늘 생일자 자동 추출**: 시스템 날짜 기준으로 당일 생일자 필터링
- **이번 달 생일자 조회**: 월별 생일자 현황 파악
- **개인화 메시지**: `{name}` 변수를 사용한 자동 이름 치환

### 3. SMS 발송 (Solapi 연동)

- **Solapi REST API 통합**: HMAC-SHA256 인증 방식 사용
- **대량 발송**: 여러 명에게 한 번에 발송 (자동 딜레이 적용)
- **메시지 미리보기**: 발송 전 개인화된 메시지 확인
- **발송 현황 표시**: 실시간 진행 상태 표시

### 4. 발송 이력 관리

- **전체 이력 저장**: 날짜, 시간, 수신자, 메시지, 상태 기록
- **필터링**: 전체/오늘/이번 주/이번 달 기준 조회
- **통계**: 성공/실패 건수 및 비율 표시
- **CSV 내보내기**: 선택한 기간의 이력을 CSV로 다운로드

## 🚀 빠른 시작

### 1. 배포 방법

#### GitHub Pages로 배포

```bash
# 1. 저장소 클론 또는 다운로드
git clone https://github.com/effect082/SMS.git
cd SMS

# 2. GitHub에 푸시
git add .
git commit -m "Initial commit"
git push origin main

# 3. GitHub Pages 활성화
# GitHub 저장소 > Settings > Pages
# Source: Deploy from a branch
# Branch: main / root
# Save 클릭
```

배포 완료 후 접속 주소: `https://effect082.github.io/SMS/`

### 2. Solapi API 설정

1. [Solapi 콘솔](https://solapi.com)에 로그인
2. API Key와 API Secret 확인
3. 발신번호 등록 (본인 인증 필요)

### 3. 앱 설정

1. 앱 접속 후 **설정** 페이지로 이동
2. Solapi API 정보 입력:
   - API Key
   - API Secret
   - 발신번호
3. 기본 메시지 템플릿 설정
4. **설정 저장** 클릭

## 📝 사용 방법

### CSV 파일 준비

1. **템플릿 다운로드**: 후원자 관리 페이지에서 "CSV 템플릿 다운로드" 클릭
2. **데이터 입력**: Excel이나 Google Sheets에서 데이터 입력

   ```csv
   이름,전화번호,생년월일
   홍길동,01012345678,1990-01-15
   김영희,01087654321,1985-03-22
   ```

3. **저장**: UTF-8 인코딩으로 CSV 저장
   - Excel: "CSV UTF-8(쉼표로 분리)" 형식으로 저장
   - Google Sheets: 파일 > 다운로드 > CSV

### 데이터 업로드

1. **후원자 관리** 페이지 이동
2. CSV 파일을 업로드 영역에 드래그하거나 클릭하여 선택
3. 자동으로 파싱 및 중복 검증
4. 결과 확인

### SMS 발송

1. **SMS 발송** 페이지 이동
2. 메시지 템플릿 작성
   - `{name}` 사용 시 자동으로 각 후원자 이름으로 치환
   - 예: `{name}님, 생일을 축하드립니다!`
3. 오늘 생일자 확인
4. 미리보기로 최종 확인
5. **SMS 발송하기** 클릭

### 발송 이력 조회

1. **발송 이력** 페이지 이동
2. 필터 선택 (전체/오늘/이번 주/이번 달)
3. 이력 확인
4. 필요시 **CSV 내보내기**로 백업

## 🔐 보안 고려사항

> **⚠️ 중요**: 이 앱은 클라이언트 사이드 애플리케이션으로, API 키가 브라우저 LocalStorage에 저장됩니다.

### 권장사항

1. **접근 제한**: 관리자만 접근할 수 있도록 URL을 비공개로 관리
2. **정기 변경**: API Secret을 주기적으로 변경
3. **모니터링**: Solapi 콘솔에서 사용 내역 정기 확인
4. **백업**: 후원자 데이터와 발송 이력을 정기적으로 CSV로 백업

### 보안 강화 방법 (선택사항)

- Google Apps Script를 프록시 서버로 사용
- Netlify Functions 또는 Vercel Serverless Functions 활용
- 비밀번호 인증 추가

## 📊 데이터 저장

- **후원자 데이터**: 브라우저 LocalStorage
- **발송 이력**: 브라우저 LocalStorage
- **설정 정보**: 브라우저 LocalStorage

> 📌 **참고**: 브라우저를 변경하거나 캐시를 삭제하면 데이터가 사라질 수 있으니 정기적으로 백업하세요.

## 🛠️ 기술 스택

- **Frontend**: HTML5, CSS3 (Vanilla), JavaScript (ES6+)
- **API**: Solapi REST API v4
- **Storage**: LocalStorage
- **Authentication**: HMAC-SHA256
- **Deployment**: GitHub Pages

## 📄 CSV 파일 형식

### 필수 필드

- `이름`: 후원자 이름 (한글, 영문 가능)
- `전화번호`: 숫자만, 하이픈 없이 (예: 01012345678)
- `생년월일`: YYYY-MM-DD 형식 (예: 1990-01-15)

### 예시

```csv
이름,전화번호,생년월일
홍길동,01012345678,1990-01-15
김영희,01087654321,1985-03-22
이철수,01055556666,1992-12-25
```

## 🔧 문제 해결

### CSV 업로드 시 한글이 깨져요

- Excel에서 "CSV UTF-8(쉼표로 분리)" 형식으로 저장하세요
- Google Sheets 사용을 권장합니다

### SMS가 발송되지 않아요

1. 설정에서 API Key, Secret, 발신번호가 올바르게 입력되었는지 확인
2. Solapi 계정의 잔액 확인
3. 발신번호가 Solapi에 등록되어 있는지 확인
4. 브라우저 콘솔(F12)에서 오류 메시지 확인

### 데이터가 사라졌어요

- 브라우저 캐시를 삭제했거나 다른 브라우저를 사용한 경우
- 항상 후원자 데이터를 CSV로 백업하세요

## 📞 지원

문제가 발생하거나 기능 제안이 있으시면 GitHub Issues를 통해 알려주세요.

## 📜 라이선스

MIT License

## 🙏 감사의 말

이 프로젝트는 복지관 후원자 관리 업무의 효율화를 위해 제작되었습니다.

---

**Made with ❤️ for 복지관**
